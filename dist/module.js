define(["@emotion/css","@grafana/data","@grafana/runtime","@grafana/ui","lodash","react"],((e,t,r,n,o,a)=>(()=>{"use strict";var i=[e=>{e.exports=a},e=>{e.exports=o},e=>{e.exports=n},e=>{e.exports=t},,e=>{e.exports=r},t=>{t.exports=e},(e,t,r)=>{e.exports=r(8)},(e,t)=>{const r={TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:e=>`${e} menu`,MenuGroup:e=>`${e} menu group`,MenuItem:e=>`${e} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:e=>`data-testid Panel header ${e}`,headerItems:e=>`Panel header item ${e}`,containerByTitle:e=>`${e} panel`,headerCornerInfo:e=>`Panel header ${e}`},Visualization:{Graph:{VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:e=>`gpl alias ${e}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:e=>`VizLegend series ${e}`},Drawer:{General:{title:e=>`Drawer title ${e}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:e=>`${e} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"Apply changes and go back to dashboard",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:e=>`Tab ${e}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:e=>`${e} query operation action`,title:e=>`Query editor row title ${e}`,container:e=>`Query editor row ${e}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:e=>`Alert ${e}`,alertV2:e=>`data-testid Alert ${e}`},TransformTab:{content:"Transform editor tab content",newTransform:e=>`New transform ${e}`,transformationEditor:e=>`Transformation editor ${e}`,transformationEditorDebugger:e=>`Transformation editor debugger ${e}`},Transforms:{card:e=>`New transform ${e}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},searchInput:"search transformations"},PageToolbar:{container:()=>".page-toolbar",item:e=>`${e}`},QueryEditorToolbarItem:{button:e=>`QueryEditor toolbar item button ${e}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:e=>e?`Options group ${e}`:"Options group",toggle:e=>e?`Options group ${e} toggle`:"Options group toggle"},PluginVisualization:{item:e=>`Plugin visualization item ${e}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:e=>`Value picker button ${e}`,select:e=>`Value picker select ${e}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:e=>`data-testid Collapse folder ${e}`,expandFolder:e=>`data-testid Expand folder ${e}`,dashboardItem:e=>`${r.Search.dashboardItems} ${e}`,dashboardCard:e=>`data-testid Search card ${e}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:e=>`Call to action button ${e}`,buttonV2:e=>`data-testid Call to action button ${e}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:e=>`data-testid suggestion-${e}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:e=>`data-testid dashboard-row-title-${e}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"}},n={Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:e=>`Data source list item ${e}`},AddDataSource:{url:"/datasources/new",dataSourcePlugins:e=>`Data source plugin item ${e}`,dataSourcePluginsV2:e=>`Add data source ${e}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:e=>`/d/${e}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:e=>`data-testid Dashboard template variables submenu Label ${e}`,submenuItemValueDropDownValueLinkTexts:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Settings:{General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:e=>`Dashboard settings section item ${e}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Dashboard settings page title"},Annotations:{List:{addAnnotationCTA:r.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:r.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:r.CallToActionCard.button("Add variable"),addVariableCTAV2:r.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:e=>`Variable editor Table Name field ${e}`,tableRowDefinitionFields:e=>`Variable editor Table Definition field ${e}`,tableRowArrowUpButtons:e=>`Variable editor Table ArrowUp button ${e}`,tableRowArrowDownButtons:e=>`Variable editor Table ArrowDown button ${e}`,tableRowDuplicateButtons:e=>`Variable editor Table Duplicate button ${e}`,tableRowRemoveButtons:e=>`Variable editor Table Remove button ${e}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button"},QueryVariable:{queryOptionsDataSourceSelect:r.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}}},Dashboards:{url:"/dashboards",dashboards:e=>`Dashboard search item ${e}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public Dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",EnableSwitch:"data-testid public dashboard on off switch",SaveConfigButton:"data-testid public dashboard save config button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert"}},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:e=>`/d-solo/${e}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemRow:"Playlist item row",itemIdType:"Playlist item dashboard by ID type",itemTagType:"Playlist item dashboard by Tag type",itemMoveUp:"Move playlist item order up",itemMoveDown:"Move playlist item order down",itemDelete:"Delete playlist item"}},o={pages:n,components:r};t.selectors=o}],s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return i[e](r,r.exports,l),r.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{l.r(u),l.d(u,{plugin:()=>pt});var e=l(3),t=l(5),r=l(1),n=l.n(r),o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},o(e,t)};function a(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function i(e){return"function"==typeof e}var s=!1,c={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e);s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function p(e){setTimeout((function(){throw e}),0)}var d={closed:!0,next:function(e){},error:function(e){if(c.useDeprecatedSynchronousErrorHandling)throw e;p(e)},complete:function(){}},y=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();var f=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),b=f,m=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r,n=this,o=n._parentOrParents,a=n._ctorUnsubscribe,s=n._unsubscribe,l=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof e)o.remove(this);else if(null!==o)for(var u=0;u<o.length;++u){o[u].remove(this)}if(i(s)){a&&(this._unsubscribe=void 0);try{s.call(this)}catch(e){t=e instanceof b?h(e.errors):[e]}}if(y(l)){u=-1;for(var c=l.length;++u<c;){var p=l[u];if(null!==(r=p)&&"object"==typeof r)try{p.unsubscribe()}catch(e){t=t||[],e instanceof b?t=t.concat(h(e.errors)):t.push(e)}}}if(t)throw new b(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=r._parentOrParents;if(null===o)r._parentOrParents=this;else if(o instanceof e){if(o===this)return r;r._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return r;o.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[r]:a.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function h(e){return e.reduce((function(e,t){return e.concat(t instanceof b?t.errors:t)}),[])}var g=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),v=function(e){function t(r,n,o){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=d;break;case 1:if(!r){a.destination=d;break}if("object"==typeof r){r instanceof t?(a.syncErrorThrowable=r.syncErrorThrowable,a.destination=r,r.add(a)):(a.syncErrorThrowable=!0,a.destination=new w(a,r));break}default:a.syncErrorThrowable=!0,a.destination=new w(a,r,n,o)}return a}return a(t,e),t.prototype[g]=function(){return this},t.create=function(e,r,n){var o=new t(e,r,n);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(m),w=function(e){function t(t,r,n,o){var a,s=e.call(this)||this;s._parentSubscriber=t;var l=s;return i(r)?a=r:r&&(a=r.next,n=r.error,o=r.complete,r!==d&&(i((l=Object.create(r)).unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(s))),s._context=l,s._next=a,s._error=n,s._complete=o,s}return a(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=c.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):p(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;p(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};c.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),c.useDeprecatedSynchronousErrorHandling)throw e;p(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!c.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return c.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(p(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(v);var _=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new S(e,this.project,this.thisArg))},e}(),S=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.project=r,o.count=0,o.thisArg=n||o,o}return a(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(v);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function F(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=E(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===O(a)?a:String(a)),n)}var o,a}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},C.apply(this,arguments)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var o=V(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(i,e);var r,n,o,a=I(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a.call(this,e)}return r=i,n=[{key:"query",value:function(e){return e.targets.forEach((function(t){t.query=Q(t,e)})),"trace"===e.targets[0].xcol?C(V(i.prototype),"query",this).call(this,e).pipe((t=L,function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new _(t,r))})):C(V(i.prototype),"query",this).call(this,e);var t,r}},{key:"metricFindQuery",value:function(e,r){var n={from:r.range.from.valueOf().toString(),to:r.range.to.valueOf().toString(),queries:[{datasource:{type:this.type,uid:this.uid},datasourceId:this.id,query:Q(e,r)}]};return(0,t.getBackendSrv)().post("/api/ds/query",n).then((function(e){return e.results.A.frames[0].data.values})).then(B)}}],n&&D(r.prototype,n),o&&D(r,o),Object.defineProperty(r,"prototype",{writable:!1}),i}(t.DataSourceWithBackend);function j(e,t){return{key:e,value:t}}function R(e,t){var r,n,o=JSON.parse(null===(r=e.get("resource"))||void 0===r?void 0:r.get(t)),a=Array.from(Object.entries(o),(function(e){var t=T(e,2);return j(t[0],t[1])}));return a.push(j("host",null===(n=e.get("host"))||void 0===n?void 0:n.get(t))),a}function A(e,t){var r,n,o,a=JSON.parse(null===(r=e.get("attribute"))||void 0===r?void 0:r.get(t)),i=Array.from(Object.entries(a),(function(e){var t=T(e,2);return j(t[0],t[1])}));return i.push(j("statusCode",null===(n=e.get("statusCode"))||void 0===n?void 0:n.get(t))),i.push(j("statusMessage",null===(o=e.get("statusMessage"))||void 0===o?void 0:o.get(t))),i}function N(e,t){var r,n,o=[],a=F(JSON.parse(null===(r=e.get("logs"))||void 0===r?void 0:r.get(t)));try{for(a.s();!(n=a.n()).done;){var i=n.value,s=new Map(Object.entries(i)),l=Array.from(Object.entries(i),(function(e){var t=T(e,2);return j(t[0],t[1])})),u=s.get("time");void 0!==u&&o.push({timestamp:Number(u)/1e6,fields:l})}}catch(e){a.e(e)}finally{a.f()}return o}function M(t){var r,n=function(e){for(var t=[],r=e.fields,n=new Map(r.map((function(e){return[e.name,e.values]}))),o=0;o<e.length;o++){var a,i,s,l,u,c,p,d,y={traceID:null===(a=n.get("traceID"))||void 0===a?void 0:a.get(o),spanID:null===(i=n.get("spanID"))||void 0===i?void 0:i.get(o),parentSpanID:null===(s=n.get("parentSpanID"))||void 0===s?void 0:s.get(o),operationName:null===(l=n.get("operationName"))||void 0===l?void 0:l.get(o),serviceName:null===(u=n.get("serviceName"))||void 0===u?void 0:u.get(o),serviceTags:R(n,o),startTime:null===(c=n.get("startTime"))||void 0===c?void 0:c.get(o),duration:null===(p=n.get("duration"))||void 0===p?void 0:p.get(o),tags:A(n,o),errorIconColor:"ERROR"===(null===(d=n.get("statusCode"))||void 0===d?void 0:d.get(o))?"#f00":"",logs:N(n,o)};t.push(y)}return t}(t),o=new e.MutableDataFrame({fields:[{name:"traceID",type:e.FieldType.string},{name:"spanID",type:e.FieldType.string},{name:"parentSpanID",type:e.FieldType.string},{name:"operationName",type:e.FieldType.string},{name:"serviceName",type:e.FieldType.string},{name:"serviceTags",type:e.FieldType.other},{name:"startTime",type:e.FieldType.number},{name:"duration",type:e.FieldType.number},{name:"logs",type:e.FieldType.other},{name:"tags",type:e.FieldType.other},{name:"errorIconColor",type:e.FieldType.string}],meta:{preferredVisualisationType:"trace"}}),a=F(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;o.add(i)}}catch(e){a.e(e)}finally{a.f()}return o}function L(e){return{data:[M(e.data[0])]}}function B(e){return Array.isArray(e)&&2===e.length?n().map(e[0],(function(t,r){return{text:t,value:e[1][r]}})):n().map(e[0],(function(e,t){return e&&e.text&&e.value?{text:e.text,value:e.value}:n().isObject(e)?{text:e,value:t}:{text:e,value:e}}))}function Q(e,r){if("string"==typeof e||!e.hide){var o;o="string"==typeof e?e:e.query;var a=(0,t.getTemplateSrv)().replace(o,r.scopedVars,(function(e,t){if("object"===O(e)&&(t.multi||t.includeAll)){var r=[];return e.forEach((function(e){t.name===t.label||t.description&&t.description.indexOf("field_search")>=0?r.push('"'+t.name+'":"'+e+'"'):r.push(e)})),r.join(" OR ")}return n().isArray(e)?e.join(" OR "):e})),i=a.match(/\$([0-9]+)([dmhs])/g);return n()(i).forEach((function(e){var t=e,r=1;-1!==(e=e.replace("$","")).indexOf("s")?r=1:-1!==e.indexOf("m")?r=60:-1!==e.indexOf("h")?r=3600:-1!==e.indexOf("d")&&(r=86400),e=e.replace(/[smhd]/g,"");var n=parseInt(e,10);n*=r,a=a.replace(t,String(n))})),-1!==a.indexOf("#time_end")&&(a=a.replace("#time_end",String(r.range.to.unix()/1e3))),-1!==a.indexOf("#time_begin")&&(a=a.replace("#time_begin",String(r.range.from.unix()/1e3))),a}}var K=l(0),$=l.n(K),q=l(2);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H.apply(this,arguments)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z(n.key),n)}}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Y(e);if(t){var o=Y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}(this,r)}}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function X(e,t,r){return(t=Z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e){var t=function(e,t){if("object"!==U(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===U(t)?t:String(t)}var ee=q.LegacyForms.SecretFormField,te=q.LegacyForms.FormField,re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(a,e);var t,r,n,o=J(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return X(G(e=o.call.apply(o,[this].concat(r))),"onEndpointChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options;o.url=t.target.value,n(H({},o))})),X(G(e),"onProjectChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a=H({},o.jsonData,{project:t.target.value});n(H({},o,{jsonData:a}))})),X(G(e),"onLogStoreChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a=H({},o.jsonData,{logstore:t.target.value});n(H({},o,{jsonData:a}))})),X(G(e),"onAKIDChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a="";void 0!==o.secureJsonData&&o.secureJsonData.hasOwnProperty("accessKeySecret")&&(a=o.secureJsonData.accessKeySecret),n(H({},o,{secureJsonData:{accessKeyId:t.target.value,accessKeySecret:a}}))})),X(G(e),"onAKSecretChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a="";void 0!==o.secureJsonData&&o.secureJsonData.hasOwnProperty("accessKeyId")&&(a=o.secureJsonData.accessKeyId),n(H({},o,{secureJsonData:{accessKeyId:a,accessKeySecret:t.target.value}}))})),X(G(e),"onResetAKID",(function(){var t=e.props,r=t.onOptionsChange,n=t.options;r(H({},n,{secureJsonFields:H({},n.secureJsonFields,{accessKeyId:!1}),secureJsonData:H({},n.secureJsonData,{accessKeyId:""})}))})),X(G(e),"onResetAKSecret",(function(){var t=e.props,r=t.onOptionsChange,n=t.options;r(H({},n,{secureJsonFields:H({},n.secureJsonFields,{accessKeySecret:!1}),secureJsonData:H({},n.secureJsonData,{accessKeySecret:""})}))})),e}return t=a,r=[{key:"render",value:function(){var e=this.props.options,t=e.jsonData,r=e.secureJsonFields,n=e.url,o=e.secureJsonData||{};return $().createElement("div",{className:"gf-form-group"},$().createElement("div",{className:"gf-form"},$().createElement(te,{label:"Endpoint",labelWidth:8,inputWidth:25,onChange:this.onEndpointChange,value:n||"",placeholder:"json field returned to frontend"})),$().createElement("div",{className:"gf-form-inline"},$().createElement(te,{label:"Project",labelWidth:8,inputWidth:25,onChange:this.onProjectChange,value:t.project||"",placeholder:"json field returned to frontend"})),$().createElement("div",{className:"gf-form-inline"},$().createElement(te,{label:"Logstore",labelWidth:8,inputWidth:25,onChange:this.onLogStoreChange,value:t.logstore||"",placeholder:"json field returned to frontend"})),$().createElement("div",{className:"gf-form-inline"},$().createElement("div",{className:"gf-form"},$().createElement(ee,{isConfigured:r&&r.accessKeyId,value:o.accessKeyId||"",label:"AccessKeyId",placeholder:"secure json field (backend only)",labelWidth:8,inputWidth:25,onReset:this.onResetAKID,onChange:this.onAKIDChange}))),$().createElement("div",{className:"gf-form-inline"},$().createElement("div",{className:"gf-form"},$().createElement(ee,{isConfigured:r&&r.accessKeySecret,value:o.accessKeySecret||"",label:"AccessKeySecret",placeholder:"secure json field (backend only)",labelWidth:8,inputWidth:25,onReset:this.onResetAKSecret,onChange:this.onAKSecretChange}))))}}],r&&W(t.prototype,r),n&&W(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(K.PureComponent),ne={query:"* | select count(*) as c, __time__-__time__%60 as t group by t",xcol:"t",ycol:"",logsPerPage:100,currentPage:1},oe=[{color:"#ff006e",label:"空 empty",value:"表格或日志 table or log"},{color:"#80ed99",label:"【时间列 Time colomn】",value:"时序数据 Timeseries"},{color:"#0077b6",label:"stat",value:"单值图格式 gauge/stat graph"},{color:"#0096c7",label:"pie",value:"饼图格式 pie graph"},{color:"#00b4d8",label:"bar",value:"柱状图格式 bar graph"},{color:"#48cae4",label:"trace",value:"Trace格式 Trace graph"},{color:"#90e0ef",label:"map",value:"地图格式 map graph"}],ae=[{color:"#ffca3a",label:"【无需填写】 此情况适用于Log、Trace以及表格全列展示的情况",value:"[No need to fill in] This situation applies to Log, Trace and the full column of the table"},{color:"#8ac926",label:"【col1,col2,col3】 最常用的一种形式，在图表中展示若干数值列",value:"[col1,col2,col3] The most common form, displaying several numeric columns in the chart"},{color:"#1982c4",label:"【col1#:#col2】 适用于bar和SLS时序库展示，col1为聚合列，col2为其他列",value:"[col1#:#col2] Applicable to bar and SLS metricStore, col1 is the aggregation column, col2 is other columns"}],ie=l(6),se={id:"sls",extensions:[".sls"],aliases:["sls","SLS","SLSQuery"],mimetypes:[]};const le=function(e){var t=(0,K.useRef)(e);return t.current=e,t};var ue,ce=new Uint8Array(16);function pe(){if(!ue&&!(ue="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ue(ce)}const de=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const ye=function(e){return"string"==typeof e&&de.test(e)};for(var fe=[],be=0;be<256;++be)fe.push((be+256).toString(16).substr(1));const me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(fe[e[t+0]]+fe[e[t+1]]+fe[e[t+2]]+fe[e[t+3]]+"-"+fe[e[t+4]]+fe[e[t+5]]+"-"+fe[e[t+6]]+fe[e[t+7]]+"-"+fe[e[t+8]]+fe[e[t+9]]+"-"+fe[e[t+10]]+fe[e[t+11]]+fe[e[t+12]]+fe[e[t+13]]+fe[e[t+14]]+fe[e[t+15]]).toLowerCase();if(!ye(r))throw TypeError("Stringified UUID is invalid");return r};const he=function(e,t,r){var n=(e=e||{}).random||(e.rng||pe)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return me(n)};var ge=l(7);var ve,we=null;!function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"}(ve||(ve={}));var _e,Se,Oe=[{label:"SELECT",type:ve.Keyword},{label:"FROM",type:ve.Keyword},{label:"AS",type:ve.Keyword},{label:"DISTINCT",type:ve.Keyword},{label:"GROUP",type:ve.Keyword},{label:"WHERE",type:ve.Keyword},{label:"BY",type:ve.Keyword},{label:"HAVING",type:ve.Keyword},{label:"ORDER",type:ve.Keyword},{label:"LIMIT",type:ve.Keyword},{label:"OR",type:ve.Keyword},{label:"AND",type:ve.Keyword},{label:"IN",type:ve.Keyword},{label:"NOT",type:ve.Keyword},{label:"BETWEEN",type:ve.Keyword},{label:"LIKE",type:ve.Keyword},{label:"IS",type:ve.Keyword},{label:"ASC",type:ve.Keyword},{label:"DESC",type:ve.Keyword},{label:"SUBSTRING",type:ve.Keyword},{label:"CASE",type:ve.Keyword},{label:"WHEN",type:ve.Keyword},{label:"THEN",type:ve.Keyword},{label:"ELSE",type:ve.Keyword},{label:"END",type:ve.Keyword},{label:"JOIN",type:ve.Keyword},{label:"INNER",type:ve.Keyword},{label:"LEFT",type:ve.Keyword},{label:"RIGHT",type:ve.Keyword},{label:"OUTER",type:ve.Keyword},{label:"ON",type:ve.Keyword},{label:"UNION",type:ve.Keyword}],Fe=[{label:"ALL",type:ve.Operator},{label:"AND",type:ve.Operator},{label:"ANY",type:ve.Operator},{label:"BETWEEN",type:ve.Operator},{label:"IN",type:ve.Operator},{label:"LIKE",type:ve.Operator},{label:"NOT",type:ve.Operator},{label:"OR",type:ve.Operator},{label:"SOME",type:ve.Operator},{label:"EXCEPT",type:ve.Operator},{label:"INTERSECT",type:ve.Operator},{label:"UNION",type:ve.Operator},{label:"APPLY",type:ve.Operator},{label:"CROSS",type:ve.Operator},{label:"FULL",type:ve.Operator},{label:"INNER",type:ve.Operator},{label:"JOIN",type:ve.Operator},{label:"LEFT",type:ve.Operator},{label:"OUTER",type:ve.Operator},{label:"RIGHT",type:ve.Operator},{label:"CONTAINS",type:ve.Operator},{label:"FREETEXT",type:ve.Operator},{label:"IS",type:ve.Operator},{label:"NULL",type:ve.Operator},{label:"PIVOT",type:ve.Operator},{label:"UNPIVOT",type:ve.Operator},{label:"MATCHED",type:ve.Operator}],Te={arbitrary:{type:ve.Field},avg:{type:ve.Field},checksum:{type:ve.Field},COUNT:{type:ve.Field},count_if:{type:ve.Field},geometric_mean:{type:ve.Field},max_by:{type:ve.Field},min_by:{type:ve.Field},max:{type:ve.Field},min:{type:ve.Field},sum:{type:ve.Field},bitwise_and_agg:{type:ve.Field},bitwise_or_agg:{type:ve.Field},histogram:{type:ve.Method},map_agg:{type:ve.Method},multimap_agg:{type:ve.Method},cardinality:{type:ve.Method},element_at:{type:ve.Method},map:{type:ve.Method},map_from_entries:{type:ve.Method},map_entries:{type:ve.Method},map_concat:{type:ve.Method},map_filter:{type:ve.Method},transform_keys:{type:ve.Method},transform_values:{type:ve.Method},map_keys:{type:ve.Method},map_values:{type:ve.Method},map_zip_with:{type:ve.Method},approx_distinct:{type:ve.Method},approx_percentile:{type:ve.Method},numeric_histogram:{type:ve.Method},corr:{type:ve.Function},covar_pop:{type:ve.Function},covar_samp:{type:ve.Function},regr_intercept:{type:ve.Function},regr_slope:{type:ve.Function},stddev:{type:ve.Function},stddev_samp:{type:ve.Function},stddev_pop:{type:ve.Function},variance:{type:ve.Function},var_samp:{type:ve.Function},var_pop:{type:ve.Function},abs:{type:ve.Function},cbrt:{type:ve.Function},ceiling:{type:ve.Function},cosine_similarity:{type:ve.Function},degrees:{type:ve.Function},e:{type:ve.Function},exp:{type:ve.Function},floor:{type:ve.Function},from_base:{type:ve.Function},ln:{type:ve.Function},log2:{type:ve.Function},log10:{type:ve.Function},log:{type:ve.Function},pi:{type:ve.Function},pow:{type:ve.Function},radians:{type:ve.Function},rand:{type:ve.Function},random:{type:ve.Function},round:{type:ve.Function},sqrt:{type:ve.Function},to_base:{type:ve.Function},truncate:{type:ve.Function},acos:{type:ve.Function},asin:{type:ve.Function},atan:{type:ve.Function},atan2:{type:ve.Function},cos:{type:ve.Function},sin:{type:ve.Function},cosh:{type:ve.Function},tan:{type:ve.Function},tanh:{type:ve.Function},infinity:{type:ve.Function},is_infinity:{type:ve.Function},is_finity:{type:ve.Function},is_nan:{type:ve.Function},chr:{type:ve.Function},length:{type:ve.Function},levenshtein_distance:{type:ve.Function},lpad:{type:ve.Function},rpad:{type:ve.Function},ltrim:{type:ve.Function},replace:{type:ve.Function},reverse:{type:ve.Function},rtrim:{type:ve.Function},split:{type:ve.Function},split_part:{type:ve.Function},split_to_map:{type:ve.Function},position:{type:ve.Function},strpos:{type:ve.Function},substr:{type:ve.Function},trim:{type:ve.Function},upper:{type:ve.Function},concat:{type:ve.Function},hamming_distance:{type:ve.Function},current_date:{type:ve.Function},current_time:{type:ve.Function},current_timestamp:{type:ve.Function},current_timezone:{type:ve.Function},from_iso8601_timestamp:{type:ve.Function},from_iso8601_date:{type:ve.Function},from_unixtime:{type:ve.Function},localtime:{type:ve.Function},localtimestamp:{type:ve.Function},now:{type:ve.Function},to_unixtime:{type:ve.Function},date_trunc:{type:ve.Function},date_format:{type:ve.Function},date_parse:{type:ve.Function},date_add:{type:ve.Function},date_diff:{type:ve.Function},time_series:{type:ve.Function},url_extract_fragment:{type:ve.Function},url_extract_host:{type:ve.Function},url_extract_parameter:{type:ve.Function},url_extract_path:{type:ve.Function},url_extract_port:{type:ve.Function},url_extract_protocol:{type:ve.Function},url_extract_query:{type:ve.Function},url_encode:{type:ve.Function},url_decode:{type:ve.Function},regexp_extract_all:{type:ve.Function},regexp_extract:{type:ve.Function},regexp_like:{type:ve.Function},regexp_replace:{type:ve.Function},regexp_split:{type:ve.Function},json_parse:{type:ve.Function},json_format:{type:ve.Function},json_array_contains:{type:ve.Function},json_array_get:{type:ve.Function},json_array_length:{type:ve.Function},json_extract:{type:ve.Function},json_extract_scalar:{type:ve.Function},json_size:{type:ve.Function},cast:{type:ve.Method},try_cast:{type:ve.Method},ip_to_domain:{type:ve.Function},ip_to_country:{type:ve.Function},ip_to_province:{type:ve.Function},ip_to_city:{type:ve.Function},ip_to_geo:{type:ve.Function},ip_to_city_geo:{type:ve.Function},ip_to_provider:{type:ve.Function},ip_to_country_code:{type:ve.Function},compare:{type:ve.Function},ts_smooth_simple:{type:ve.Interface},ts_smooth_fir:{type:ve.Interface},ts_smooth_iir:{type:ve.Interface},ts_period_detect:{type:ve.Interface},ts_cp_detect:{type:ve.Interface},ts_breakout_detect:{type:ve.Interface},ts_predicate_simple:{type:ve.Interface},ts_predicate_ar:{type:ve.Interface},ts_predicate_arma:{type:ve.Interface},ts_predicate_arima:{type:ve.Interface},ts_regression_predict:{type:ve.Interface},ts_decompose:{type:ve.Interface},ts_density_cluster:{type:ve.Interface},ts_hierarchical_cluster:{type:ve.Interface},ts_similar_instance:{type:ve.Interface},pattern_stat:{type:ve.Interface},pattern_diff:{type:ve.Interface},ts_find_peaks:{type:ve.Interface},promql_query:{type:ve.Struct},promql_query_range:{type:ve.Struct},promql_labels:{type:ve.Struct},promql_label_values:{type:ve.Struct},promql_series:{type:ve.Struct}},Ee={wordPattern:/(-?\d*\.\d\w*)|([^`~!#%^&*()\-=+\[{\]}\\|;:'",.<>\/?\s]+)/g,comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"<",close:">"}],folding:{}},xe=Object.keys(Te),De=xe.map((function(e){return{label:e,type:n().get(Te,e).type}})),Ce=Oe.map((function(e){return e.label})),Pe=Fe.map((function(e){return e.label})),Ie=De.concat(Oe).concat(Fe),Ve={ignoreCase:!0,defaultToken:"",tokenPostfix:".sls",vectorMatching:"",symbols:/[=><!~?:&|+\-*\/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,integersuffix:/(ll|LL|u|U|l|L)?(ll|LL|u|U|l|L)?/,floatsuffix:/[fFlL]?/,keywords:Ce,operators:Pe,builtinFunctions:xe,builtinVariables:[],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$]+/,{cases:{"@operators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@keywords":"keyword","@default":"identifier"}}],[/[<>=!%&+\-*/|~^]/,"operator"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}},ke={provideCompletionItems:function(){return{suggestions:Ie.map((function(e){return{label:e,kind:e.type,insertText:e.label,detail:e.label,insertTextRules:4}}))}}};function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},je.apply(this,arguments)}function Re(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ae={codeLens:!1,contextmenu:!1,fixedOverflowWidgets:!0,folding:!1,fontSize:14,lineDecorationsWidth:8,lineNumbers:"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:4,bottom:5},renderLineHighlight:"none",scrollbar:{vertical:"hidden",verticalScrollbarSize:8,horizontal:"hidden",horizontalScrollbarSize:0},scrollBeyondLastLine:!1,suggestFontSize:12,wordWrap:"on"},Ne=se.id,Me=!1;const Le=function(e){var t,n=he(),o=(0,K.useRef)((null===we&&(we={storageService:(t=new Map,t.set("expandSuggestionDocs",(!0).toString()),{onDidChangeValue:function(e){},onDidChangeTarget:function(e){},onWillSaveState:function(e){},get:function(e,r,n){var o;return null!==(o=t.get(e))&&void 0!==o?o:n},getBoolean:function(e,r,n){var o=t.get(e);return void 0!==o?"true"===o:n},getNumber:function(e,r,n){var o=t.get(e);return void 0!==o?parseInt(o,10):n},store:function(e,r,n,o){null==r?t.delete(e):t.set(e,r.toString())},remove:function(e,r){t.delete(e)},keys:function(e,r){return Array.from(t.keys())},logStorage:function(){},migrate:function(){return Promise.resolve(void 0)},isNew:function(e){return!0},flush:function(e){return Promise.resolve(void 0)}})}),we)),a=(0,K.useRef)(null),i=e.onBlur,s=e.onRunQuery,l=e.initialValue,u=e.placeholder,c=e.onChange,p=le(s),d=le(i),y=le(c),f=(0,K.useRef)(null),b=function(e,t){return{container:(0,ie.css)(_e||(_e=Re(["\n      border-radius: ",";\n      border: 1px solid ",";\n    "])),e.shape.borderRadius(),e.components.input.borderColor),placeholder:(0,ie.css)(Se||(Se=Re(["\n      ::after {\n        content: '","';\n        font-family: ",";\n        opacity: 0.3;\n      }\n    "])),t,e.typography.fontFamilyMonospace)}}((0,q.useTheme2)(),u);return(0,K.useEffect)((function(){return function(){var e;null===(e=f.current)||void 0===e||e.call(f)}}),[]),$().createElement("div",{"aria-label":ge.selectors.components.QueryField.container,className:b.container,ref:a},$().createElement(q.ReactMonacoEditor,{overrideServices:o.current,options:Ae,language:"sls",value:l,beforeMount:function(e){!function(e){if(!1===Me){Me=!0;var t=se.aliases,r=se.extensions,n=se.mimetypes;e.languages.register({id:Ne,aliases:t,extensions:r,mimetypes:n}),e.languages.setMonarchTokensProvider(Ne,Ve),e.languages.setLanguageConfiguration(Ne,Ee)}}(e)},onMount:function(e,t){var o,i=e.createContextKey("isEditorFocused"+n,!1);e.onDidBlurEditorWidget((function(){i.set(!1),d.current(e.getValue())})),e.onDidFocusEditorText((function(){i.set(!0)}));var s=ke,l=je({},s,{provideCompletionItems:function(t,r,n,o){var a;return(null===(a=e.getModel())||void 0===a?void 0:a.id)!==t.id?{suggestions:[]}:s.provideCompletionItems(t,r,n,o)}}),c=t.languages.registerCompletionItemProvider(Ne,l).dispose;f.current=c;var m=function(){var t=a.current;if(null!==t){var r=e.getContentHeight();t.style.height="".concat(r+2,"px"),t.style.width="100%";var n=t.clientWidth;e.layout({width:n,height:r})}};e.onDidContentSizeChange(m),m();var h=(0,r.debounce)((function(){var t=e.getValue();y.current(t)}),300);if(null===(o=e.getModel())||void 0===o||o.onDidChangeContent((function(){h()})),e.addCommand(t.KeyMod.Shift|t.KeyCode.Enter,(function(){p.current(e.getValue())}),"isEditorFocused"+n),u){var g=[{range:new t.Range(1,1,1,1),options:{className:b.placeholder,isWholeLine:!0}}],v=[],w=function(){var t=e.getModel();if(t){var r=0===t.getValueLength()?g:[];v=t.deltaDecorations(v,r)}};w(),e.onDidChangeModelContent(w)}}}))};var Be,Qe,Ke,$e,qe;function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},He.apply(this,arguments)}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ze(n.key),n)}}function ze(e,t){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ze(e,t)}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ye(e);if(t){var o=Ye(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ge(e)}(this,r)}}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}function Xe(e,t,r){return(t=Ze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ze(e){var t=function(e,t){if("object"!==Ue(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ue(t)?t:String(t)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}(i,e);var t,n,o,a=Je(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Xe(Ge(e=a.call.apply(a,[this].concat(r))),"onQueryTextChange",(function(t){var r=e.props;(0,r.onChange)(He({},r.query,{query:t.target.value}))})),Xe(Ge(e),"onQueryTextChangeString",(function(t){var r=e.props;(0,r.onChange)(He({},r.query,{query:t}))})),Xe(Ge(e),"onQueryTextChangeWithRunQuery",(function(t){var r=e.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(He({},o,{query:t})),a()})),Xe(Ge(e),"onXChange",(function(t){var r=e.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(He({},o,{xcol:t.target.value})),a()})),Xe(Ge(e),"onYChange",(function(t){var r=e.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(He({},o,{ycol:t.target.value})),a()})),e}return t=i,(n=[{key:"render",value:function(){var e=(0,r.defaults)(this.props.query,ne),t=e.query,n=e.xcol,o=e.ycol;return $().createElement($().Fragment,null,$().createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},Be||(Be=$().createElement(q.InlineFormLabel,{width:6,className:"query-keyword"},"Query")),$().createElement(Le,{onChange:this.onQueryTextChangeString,onRunQuery:this.onQueryTextChangeWithRunQuery,onBlur:this.onQueryTextChangeString,initialValue:null!=t?t:"",languageProvider:{},history:[],placeholder:""})),$().createElement("div",{className:"gf-form-inline",style:{lineHeight:"32px",verticalAlign:"center"}},$().createElement(q.InlineField,{label:"ycol",labelWidth:12},$().createElement(q.Input,{width:60,prefix:Qe||(Qe=$().createElement(q.Icon,{name:"text-fields"})),value:o,onChange:this.onYChange,label:"ycol",suffix:Ke||(Ke=$().createElement(q.Tooltip,{content:$().createElement(q.Card,null,$().createElement(q.Card.Heading,null,"ycol 简介 Introduction"),$().createElement(q.Card.Description,null,$().createElement(q.SeriesTable,{series:ae}))),interactive:!0,theme:"info-alt"},$().createElement(q.Icon,{name:"question-circle"})))})),$().createElement(q.InlineField,{label:"xcol",labelWidth:12},$().createElement(q.Input,{width:40,prefix:$e||($e=$().createElement(q.Icon,{name:"x"})),value:n,onChange:this.onXChange,label:"xcol(time)",suffix:qe||(qe=$().createElement(q.Tooltip,{content:$().createElement(q.Card,null,$().createElement(q.Card.Heading,null,"xcol 简介 Introduction"),$().createElement(q.Card.Description,null,$().createElement(q.SeriesTable,{series:oe}))),interactive:!0,theme:"info-alt"},$().createElement(q.Icon,{name:"question-circle"})))}))))}}])&&We(t.prototype,n),o&&We(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}(K.PureComponent);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rt.apply(this,arguments)}function nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lt(n.key),n)}}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ot(e,t)}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=st(e);if(t){var o=st(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===tt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return it(e)}(this,r)}}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},st(e)}function lt(e){var t=function(e,t){if("object"!==tt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tt(t)?t:String(t)}var ut=q.LegacyForms.FormField,ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}(a,e);var t,r,n,o=at(a);function a(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return e=o.call.apply(o,[this].concat(s)),t=it(e),n=function(t){var r=e.props;(0,r.onChange)(rt({},r.query,{query:t.target.value}))},(r=lt(r="onQueryTextChange"))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e}return t=a,(r=[{key:"render",value:function(){var e=this.props.query.query;return $().createElement($().Fragment,null,$().createElement("div",{className:"gf-form-inline"},$().createElement(ut,{style:{fontFamily:"Menlo, monospace"},labelWidth:6,inputWidth:30,value:e,onChange:this.onQueryTextChange,label:"query"})))}}])&&nt(t.prototype,r),n&&nt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(K.PureComponent),pt=new e.DataSourcePlugin(k).setConfigEditor(re).setQueryEditor(et).setVariableQueryEditor(ct)})(),u})()));
//# sourceMappingURL=module.js.map